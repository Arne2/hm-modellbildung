\input{header}

\title{Modell eines Insel-Callshops}
\providecommand{\subtitle}[1]{}
\subtitle{2. Projekt zu Modellierung und Simulation}
\author{Daniel Graf, Dimitrie Diez, Arne Schöntag, Peter Müller}
\date{}

\begin{document}

\maketitle

\tableofcontents
\section{Einführung}
Simulationen haben in der moderne einen sehr hohen Stellenwert erlangt, da durch sie zahlreiche, oftmals sehr genaue, Zukunftsprognosen erstellt werden können. Als Grundlage für die Simulationen dienen in der Regel Modelle, welche einen Ausschnitt der Wirklichkeit abbilden. Das Thema dieser Studienarbeit ist die Simulation eines Callshops, bzw. des Telefons in einem Callshop, in einem Inseldorf. Dieser wird für günstige Telefonate ins Ausland verwendet. 

\section{Beschreibung des Modells}
Für die Simulation des Insel-Callshops wird ein Warteschlagenmodell mit Clients und zunächst nur einem Server verwendet. Jede Person die den CallShop betritt wird durch einen neuen Client repräsentiert. Das Telefon des Shops ist durch den Server dargestellt. Möchte eine Person das Telefon zu einem Zeitpunkt benützen, zu dem bereits eine andere Person telefoniert, muss sie sich hinten anstellen und warten, bis die Person ihr Telefonat beendet hat. Im Modell wird dieses durch eine Warteschlage (Queue) realisiert, in die sich ankommende Clients einordnen und sobald der Server nichtmehr belegt ist nach dem FIFO (first in first out) Prinzip bedient werden. 

Im Modell werden sowohl die Ankunftszeiten der Clients, als auch die Dauer der Telefonate durch eine negative Exponentialverteilung beschrieben, da diese sehr nah an den real beoachteten Verhalten liegt. Der mathematische Hintergrund liegt in der Eigenschaft der Exponentialfunktion zugrunde. Die Exponentialverteilung ist die einzige kontinuierliche Verteilung, welche zugleich die Markoveigenschaft, die sogenannte Gedächtnislosigkeit, erfüllt. Diese besagt, dass die seit dem letzten Ereignis vergangene Zeit (in diesem Beispiel Anrufer) keinen Einfluss auf die Verteilung der Zeit bis zum nächsten Ereignis (bis zum nächsten Anruf) hat. 
Quelle: http://www.mathepedia.de/Exponentialverteilung.aspx

Darüber hinaus wird ein zweites Modell betrachtet, in welchem die Bewohner des Inseldorfes (Einheimische) bevorzugt werden. Im weiteren Verlauf der Studienarbeit werden diese mit VIP bezeichnet. 

In einem dritten Modell befindet sich ein weiteres Telefon im Callshop. Von den nun zwei Telefonen (zwei Server), behandelt eines alle ankommenden Personen (Clients) gleichberechtigt. Das zweite Telefon bevorzugt die VIPs und behandelt andere Personen nur, wenn kein VIP wartet.

\section{Anforderungen/Requirements}

\section{Softwaredesign}

\section{Softwaretest}

\section{Auswertung der Ergebnisse}
Im Zuge dieses Kapitels werden alle Ergebnisse der Simulation und die daraus errechneten Werte erläutert. Zusätzlich werden relevante Größen durch Plots veranschaulicht.

\subsection{Modell \glqq Ein Telefon\grqq} 
Für den in Kapitel \ref{sec:Requirements} REFERENZAUFANFORDERUNG aufgelisteten ersten Betriebsmodus (ein Server, welcher alle Clients bedient) werden im folgenden die Auswertungen aufgeführt. Exemplarisch werden vier verschiedene durchschnittliche Ankunftszeiten für die Clients verwendet. Zunächst wird eine durchschnittliche Ankunftszeit von 1500 angenommen, was bei einer durchschnittlichen Telefonierdauer (Dauer der Serverbelegung) einer sehr geringen Serverauslastung entspricht. Anschließend werden mit den durchschnittlichen Ankunftszeiten von 1000, 500 und 100 die Auswirkungen von höherer Serverauslastung auf das Ergebnis der Simulation erläutert. \\

Für jede durchschnittliche Ankunftszeit werden zunächst die zu erwartenden Werte, basierend auf den Formeln für M/M/1 Warteschlangenmodelle ermittelt. Die einzelnen Formeln sind im folgenden Kapitel aufgeführt. Betrachtet werden hierbei, wie in den \ref{sec:Requirements} erläutert die durchschnittliche Anzahl von Kunden im System, durchschnittliche Warteschlangenlänge, durchschnittliche Verweildauer im System und die durchschnittliche Verweildauer in der Warteschlange. Die berechneten Größen werden als Erwartungswerte betrachtet gegen die die durch die Simulation ermittelten Werte geprüft werden. 

Sowohl die Maßnahmen für die Verifikation der implementierten Simulation, als auch für die Validierung der errechneten Durschnittswerte, werden in den Kapitel (REFERENZ AUF DIE ZWEI KAPITEL) näher beschrieben. In den folgenden Abbildungen wird die durchschnittliche Zwischenankunftszeit mit \glqq MeanAr\grqq abgekürzt.

%\subsubsection{Durchschnittliche Ankunftszeit der Clients: 1500}
%\paragraph{Verwendung der Mathematica Simulation}
%- Bild der Simulation 
%- Plot Little-Law
%- MeanSystemSize, MeanSystemTime, MeanQueueSize,MeanQueueTime aufführen
%
%\paragraph{Verwendung der implementierten Java-Simulation, Berechnung in Mathematica}
%\begin{figure}[htpb]
%	\centering
%	\includegraphics[width=0.8\textwidth]{abbildungen/auswertung1500/meanQueueTimePlot.pdf}
%	\caption{Mittlere Warteschlangenlänge, MeanAr = 1500}
%	\label{fig:meanQueueTime1500}
%\end{figure}
%
%\begin{figure}[htpb]
%	\centering
%	\includegraphics[width=0.8\textwidth]{abbildungen/auswertung1500/meanCallingTimePlot.pdf}
%	\caption{Mittlere Telefonierdauer, MeanAr = 1500}
%	\label{fig:meanCallingTime1500}
%\end{figure}
%
%\begin{figure}[htpb]
%	\centering
%	\includegraphics[width=0.8\textwidth]{abbildungen/auswertung1500/meanSystemTimePlot.pdf}
%	\caption{Mittlere Zeit im System (Wartezeit + Telefonierdauer), MeanAr = 1500}
%	\label{fig:meanSystemTime1500}
%\end{figure}
%\paragraph{Simulation und Berechnung in Java}

\subsubsection{Formeln für M/M/1 Warteschlangenmodelle}
\label{Formeln}
Die im folgenden aufgeführten Formeln gelten für M/M/1 Warteschlangenmodelle. Mit $Ls$ wird die durchschnittliche Anzahl von Kunden im System bezeichnet. $Lq$ gibt die durchschnittliche Länge der Warteschlange an. $Ws$ definiert die durchschnittliche Verweildauer der einzelnen Kunden im System und $Wq$ die durchschnittliche Verweildauer in der Warteschlange. 

\begin{equation}
Ls=\frac{\lambda}{\mu - \lambda}
\end{equation}
\begin{equation}
Lq=\frac{\rho\lambda}{\mu - \lambda}
\end{equation}
\begin{equation}
Ws=\frac{1}{\mu - \lambda}
\end{equation}
\begin{equation}
Wq=\frac{\rho}{\mu - \lambda}
\end{equation}
In den einzelnen Gleichungen beschreibt $\lambda$, $\mu$ und $\rho$ wie folgt definiert: $\lambda$ beschreibt die durchschnittliche Ankunftszeit der Kunden pro Zeiteinheit. $\mu$ definiert die durchschnittliche Telefonierdauer der Kunden pro Zeiteinheit. Und $\rho$ beschreibt die durchschnittliche Auslastung des Telefons. Quelle: $http://www.business.uzh.ch/dam/jcr:00000000-0451-792f-ffff-fffffe13aac9/ServiceManagement_Warteschlangenmodelle.pdf$

\begin{equation}
\rho=\frac{\lambda}{\mu}
\end{equation}

\subsubsection{Durchschnittliche Ankunftszeit der Clients: 1000}
\paragraph{Theoretische Erwartungswerte laut M/M/1 Warteschlangenmodell}
Bei einer durchschnittlichen Zwischenankunftszeit von 1000 ($\lambda=\frac{1}{1000}$, $\mu=\frac{1}{100}$)ergeben sich, basierend auf den in Abschnitt \label{Formeln} aufgeführten Formeln, folgende Erwartungswerte:
\begin{equation}
Ls=0,111111
\end{equation}
\begin{equation}
Lq=0,0111111
\end{equation}
\begin{equation}
Ws=111,111
\end{equation}
\begin{equation}
Wq=11,1111
\end{equation}
Die einzelnen Erwartungswerte sind in den nachfolgenden Plots durch eine gelbe Linie hervorgehoben.
\paragraph{Verwendung der implementierten Java-Simulation, Berechnung in Mathematica}

\begin{figure}[htpb]
	\centering
	\includegraphics[width=0.8\textwidth]{abbildungen/1_Phone/Arrival_1000_Serve_100_dur_1000000_Skip_0/MeanSystemSize.pdf}
	\caption{Durchschnittliche Anzahl an Kunden im System, MeanAr = 1000}
	\label{fig:meanSystemSize1000}
\end{figure}

Abbildung \ref{fig:meanSystemSize1000} zeigt die durchschnittliche Anzahl an Kunden im System an. Ab einer Simulationszeit von ca $200000$ liegt diese konstant bei $0.111111$, was mit dem Erwartungswert übereinstimmt und somit ein Indiz für die Richtigkeit der Simulation darstellt. Durch die Vergleichsweise kurze Telefonierzeit und lange Zwischenankunftszeit befinden sich über den Zeitverlauf nur wenige Kunden im System. 

\begin{figure}[htpb]
	\centering
	\includegraphics[width=0.8\textwidth]{abbildungen/1_Phone/Arrival_1000_Serve_100_dur_1000000_Skip_0/MeanSystemTime.pdf}
	\caption{Durchschnittliche Verweildauer der Kunden im System, MeanAr = 1000}
	\label{fig:meanSystemTime1000}
\end{figure}

Betrachtet man Abbildung \ref{fig:meanSystemTime1000}, wird deutlich, dass die durchschnittliche Verweilsdauer im System bis zu einer Simulationszeit von $300000$ noch stark variiert. Anschließend ändert sie sich nur noch geringfügig, bleibt jedoch unter dem erwarteten Wert von $111.111$. Der Grund hierfür könnte entweder eine Ungenauigkeit aufgrund von Runden bei der Division oder ein Fehler in der Berechnung sein.

\begin{figure}[htpb]
	\centering
	\includegraphics[width=0.8\textwidth]{abbildungen/1_Phone/Arrival_1000_Serve_100_dur_1000000_Skip_0/MeanQueueSize.pdf}
	\caption{Durchschnittliche Warteschlangenlänge, MeanAr = 1000}
	\label{fig:meanQueueSize1000}
\end{figure}

Bei der Betrachtung der in Abbildung \ref{fig:meanQueueSize1000} gezeigte durchschnittlichen Warteschlangenlänge fällt auf, dass die Werte zu Beginn der Simulation um ca. $0,004$ schwanken. Auch gegen Ende der Simulation schwanken die Werte noch um ca. $0,0018$. Während der gesamten Simulationsdauer liegen die Werte unter dem Erwartungswert von $0,0111111$, nähern sich diesem jedoch gegen Ende der Simulationszeit immer weiter an. Grund hierfür könnte ein nicht vollkommen eingeschwungenes System sein. Die Simulation müsste hierfür erneut durchgeführt werden, mit einer größeren Simulationsdauer.

\begin{figure}[htpb]
	\centering
	\includegraphics[width=0.8\textwidth]{abbildungen/1_Phone/Arrival_1000_Serve_100_dur_1000000_Skip_0/MeanQueueTime.pdf}
	\caption{Durchschnittliche Verweildauer in der Warteschlange , MeanAr = 1000}
	\label{fig:meanQueueTime1000}
\end{figure} 

Die in Abbildung \ref{fig:meanQueueTime1000} aufgeführte durchschnittliche Verweildauer in der Warteschlange weißt einen ähnlichen Verlauf auf wie die in Abbildung \ref{fig:meanQueueSize1000} gezeigte durchschnittliche Warteschlangenlänge. Dieses Verhalten ist plausibel, da bei einer größeren Warteschlangenlänge auch die Wartezeit in der Warteschlange steigt. Gegen Ende der Simulation näher sich die durchschnittliche Verweildauer in der Warteschlange dem Erwartungswert von $11,1111$ an, erreicht ihn jedoch nicht. Wie bereits erläutert müsste die Simulation für eine genauere Beurteilung erneut mit einer längeren Simulationsdauer durchgeführt werden. 

\paragraph{Simulation und Berechnung in Java}


\subsubsection{Durchschnittliche Ankunftszeit der Clients: 500}
\paragraph{Verwendung der Mathematica Simulation}
- Bild der Simulation 
- Plot Little-Law
- MeanSystemSize, MeanSystemTime, MeanQueueSize,MeanQueueTime aufführen
\paragraph{Verwendung der implementierten Java-Simulation, Berechnung in Mathematica}
%\begin{figure}[htpb]
%	\centering
%	\includegraphics[width=0.8\textwidth]{abbildungen/auswertung500/meanQueueTimePlot.pdf}
%	\caption{Mittlere Warteschlangenlänge, MeanAr = 500}
%	\label{fig:meanQueueTime500}
%\end{figure}

%\begin{figure}[htpb]
%	\centering
%	\includegraphics[width=0.8\textwidth]{abbildungen/auswertung500/meanCallingTimePlot.pdf}
%	\caption{Mittlere Telefonierdauer, MeanAr = 500}
%	\label{fig:meanCallingTime500}
%\end{figure}
%

\paragraph{Simulation und Berechnung in Java}


\subsubsection{Durchschnittliche Ankunftszeit der Clients: 100}
\paragraph{Verwendung der Mathematica Simulation}
- Bild der Simulation 
- Plot Little-Law
- MeanSystemSize, MeanSystemTime, MeanQueueSize,MeanQueueTime aufführen

\paragraph{Verwendung der implementierten Java-Simulation, Berechnung in Mathematica}

\include{abbildungen/auswertung100/ResultsTable}
%\begin{figure}[htpb]
%	\centering
%	\includegraphics[width=0.8\textwidth]{abbildungen/auswertung100/meanQueueTimePlot.pdf}
%	\caption{Mittlere Warteschlangenlänge, MeanAr = 100}
%	\label{fig:meanQueueTime100}
%\end{figure}
%
%\begin{figure}[htpb]
%	\centering
%	\includegraphics[width=0.8\textwidth]{abbildungen/auswertung100/meanCallingTimePlot.pdf}
%	\caption{Mittlere Telefonierdauer, MeanAr = 100}
%	\label{fig:meanCallingTime100}
%\end{figure}
%
%\begin{figure}[htpb]
%	\centering
%	\includegraphics[width=0.8\textwidth]{abbildungen/auswertung100/meanSystemTimePlot.pdf}
%	\caption{Mittlere Zeit im System (Wartezeit + Telefonierdauer), MeanAr = 100}
%	\label{fig:meanSystemTime100}
%\end{figure}
  
\paragraph{Simulation und Berechnung in Java}




\subsection{Modell \glqq Bevorzugte VIP\grqq} 
\subsubsection{Durchschnittliche Ankunftszeit der Clients: 100}
\subsubsection{Durchschnittliche Ankunftszeit der Clients: 500}
\subsubsection{Durchschnittliche Ankunftszeit der Clients: 1000}
\subsubsection{Durchschnittliche Ankunftszeit der Clients: 1500}

\subsection{Modell \glqq Zusätzliches VIP Telefon\grqq} 
\subsubsection{Durchschnittliche Ankunftszeit der Clients: 100}
\subsubsection{Durchschnittliche Ankunftszeit der Clients: 500}
\subsubsection{Durchschnittliche Ankunftszeit der Clients: 1000}
\subsubsection{Durchschnittliche Ankunftszeit der Clients: 1500}

\section{Fazit}

\end{document}
